version: 1.0
runtime: nodejs22
build:
  commands:
    pre-build:
      - npm ci
      - echo "NEXT_PUBLIC_SUPABASE_URL=$NEXT_PUBLIC_SUPABASE_URL" > .env.production
      - echo "NEXT_PUBLIC_SUPABASE_ANON_KEY=$NEXT_PUBLIC_SUPABASE_ANON_KEY" >> .env.production
      - cat .env.production
    build:
      - npm run build
  env:
    - name: NEXT_PUBLIC_SUPABASE_URL
      value: "https://lhknnjiadvkyaaxnimbb.supabase.co"
    - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
      value: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxoa25uamlhZHZreWFheG5pbWJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDUwMDcsImV4cCI6MjA3Nzc4MTAwN30.CzF4Zkw3r8SkPeMoZHsIMw45YYkO05RfUUqAGnnC3VI"
run:
  command: npm run start -- -p 8080
  network:
    port: 8080
  env:
    - name: NODE_ENV
      value: "production"
    - name: NEXT_PUBLIC_SUPABASE_URL
      value: "https://lhknnjiadvkyaaxnimbb.supabase.co"
    - name: NEXT_PUBLIC_SUPABASE_ANON_KEY
      value: "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imxoa25uamlhZHZreWFheG5pbWJiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjIyMDUwMDcsImV4cCI6MjA3Nzc4MTAwN30.CzF4Zkw3r8SkPeMoZHsIMw45YYkO05RfUUqAGnnC3VI"
